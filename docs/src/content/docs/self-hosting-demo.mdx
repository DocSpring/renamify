---
title: Self-Hosting Demo
description: Watch Refaktor rename itself, run the test suite using the new name, then rename itself back
---

import { LinkCard } from '@astrojs/starlight/components';
import Quote from '../../components/Quote.astro';

<Quote 
  author="Wikipedia"
  source="Self-hosting (compilers)"
  sourceUrl="https://en.wikipedia.org/wiki/Self-hosting_(compilers)"
>
  In computer programming, self-hosting is the use of a program as part of the toolchain or operating 
  system that produces new versions of that same programâ€”for example, a compiler that can compile 
  its own source code.
</Quote>


Watch Refaktor rename itself to `awesome_file_renaming_tool`, then use the new binary to rename itself back again.


```bash
# Clone and build
git clone https://github.com/DocSpring/refaktor
cd refaktor
cargo build

# Use refaktor to rename itself to awesome_file_renaming_tool
./target/debug/refaktor rename refaktor awesome_file_renaming_tool --preview table --yes

# Make sure the old compiled binary is gone
rm -rf target

# Run the full test suite using the new name
cargo test

# Build the "awesome_file_renaming_tool" binary
cargo build

# Use the new binary to rename itself back to refaktor
./target/debug/awesome_file_renaming_tool rename awesome_file_renaming_tool refaktor --preview table --yes

# Back to the original name
rm -rf target
cargo test
cargo build
./target/debug/refaktor --help

# Everything is completely restored. No changes to any files after the round-trip
git status
# On branch main
# Your branch is up to date with 'origin/main'.

# nothing to commit, working tree clean
```

---

<br/>

P.S. We run all these steps on CI as an end-to-end integration test:

<LinkCard
  title="scripts/e2e-test.sh"
  href="https://github.com/DocSpring/refaktor/blob/main/scripts/e2e-test.sh"
  description="View the script we use in our GitHub Actions workflow"
/>
